# Добавление правил в ЛК

Скрипт разделен на 3 части:

``1_add_rule.py`` - создание правил
``2_push_ruleaction.py`` - создание действий в правила
``3_push_ruleon.py`` - включение правил по расписанию

Перед началом нужно прописать данные с авторизацией в ЛК в файл ``.\service\access.py``

Весь вывод записывается в файл "log.log"

### Cоздание правил

Для начала необходимо подготовить правила. Шаблон для создания находится по пути ``.\rule_template\data.xlsx``
После формирования правил копировать полученные данные и вставить в файл ``template.json`` в этой же папке.
Также в этой папке лежит файл ``example.template.json`` как пример заполнения.

После заполнения необходимо запустить скрипт ``1_add_rule.py``

После выполнения скрипта будет создана папка ``rule_id`` в которой будет находится информация об ID созданных правил в из указанных типовых конфигураций в файле ``template.json``.

### Cоздание действий в правилах

В папке со скриптами лежит файл ``ruleaction_array.py`` в который нужно добавлять информацию о действиях, данные представлены в виде массивов.

- Первый массив: id правила
- Второй массив: id параметра
- Третий массив: установка правил

!Важно: Второй и третий массив должны быть одинаковой длинны так как обрабатываются совместно, например:
``data = [[[1],[372,2,3,4],[375,6,7,8]]]``
Где: ``372`` - id правила, ``375`` - установка правила

Для передачи данных в одно правило следует использовать конструкцию:
``[[[1],[1,2,3,4],[1,2,3,4]]]``

Для передачи данных в несколько правил следует использовать конструкцию:
``[[324],[372,373,374,375],[1,2,3,4]], [[333],[372,373,374,375],[5,6,7,8]]``

Для приравнивания измеряемых параметров друг к другу параметр к которому прирамниваем пишется в виде 'D1111' (где 1111 - id измеряемого параметра).
``data = [[[1],[372,2,3,4],['D5158','D6','D7','D8']]]``

### Добавление "правил по расписанию"

В папке со скриптами лежит файл ``ruleon_array.py`` в который нужно добавлять информацию о правилах по расписанию, данные представлены в виде массивов.

- Первый массив: id типовой конфигурации
- Второй массив: id правила
- Третий массив: id расписания
- Четвертый массив: id шаблона расписания

Для создания одного "правила по расписанию" следует использовать конструкцию:
``[[1, 2, 3, 4]]``
Для создания нескольких "правил по расписанию" следует использовать конструкцию:
``[1, 2, 3, 4], [1, 2, 3, 4], [1, 2, 3, 4], [1, 2, 3, 4]``

# Требуемые библиотеки для работы скриптов:
requests - ``pip install requests``